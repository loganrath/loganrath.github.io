<html lang="en">
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.7.4/js/foundation.min.js" integrity="sha512-+CnEgueYRDzx2s3IIAOpZd8HeOfrSbK3loeHw0jXJODAe3eFROHpBxEsun2kU+sZCaoAA0eFJrhfVV3RGG50GA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.7.4/css/foundation-float.min.css" integrity="sha512-LSYG1wfgim4owXFFJrK6pkikbwBr0iF8hCMOo0EFUuF/rut09ry21JGoLx+raCL9oE/no/e18kln42652dy+7Q==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.7.4/css/foundation-prototype.min.css" integrity="sha512-3ZU+tzap9AYQIBo3jjlnO5cl6ZLpwVQr1DKPIovx5wuHv1hCSVXZjCQ0BllPsTexfK1WvvgCTrE7oE70V0L/aA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.7.4/css/foundation-rtl.min.css" integrity="sha512-smnXxK8VDii6vIq2k4D7l+knMgcIp2D2nTFJsN0hJzP59VjLn7LRxRYDmZGNmLuTAJtYXWK7Owhl9vkLwGYxiA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.7.4/css/foundation.min.css" integrity="sha512-TgmH0v8FUwmsr3yDgd5PTCgR6lRZ2Q5c7KsUNTHcoxZpOExCX16MYECIL4xdRQOhQlz7pCnZlmA4zda58QWxBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <div class="container">
              <!-- INCLUDE -->
               			
               	<div class="bleed bg-blue">
	    <div class="row">
	        <div class="large-12 medium-12 small-12 space-above space-below">
				<form target="_blank" action="https://suny-bro.primo.exlibrisgroup.com/discovery/search" method="get"  id="libSearchForm" name="libSearchForm">
	
			     <!-- Customizable Parameters -->
			        <input name="institution" type="hidden" value="01SUNY_BRO" /> 
			        <input name="vid" type="hidden" value="01SUNY_BRO:01SUNY_BRO" /> 
			        <input id="primoTab" name="tab" type="hidden" value="Everything" /> 
			        <input id="primoScope" name="search_scope" type="hidden" value="MyInst_and_CI" /> 
			        <input name="mode" type="hidden" value="Basic" /> 
			        
			     <!-- Fixed parameters --> 
			        <input name="displayMode" type="hidden" value="full" /> 
			        <input name="bulkSize" type="hidden" value="10" /> 
			        <input name="highlight" type="hidden" value="true" /> 
			        <input name="dum" type="hidden" value="true" /> 
			        <input id="primoQuery" name="query" type="hidden" /> 
			        <input name="displayField" type="hidden" value="all" /> 
			        
			     <!-- Enable this if "Expand My Results" is enabled by default in Views Wizard --> 
			        <input name="pcAvailabiltyMode" type="hidden" value="true" /> 
			                
			        <div class="large-6 medium-8 small-12 columns" id="topSearchInput">
			            <div class="search-holder">
			                <label for "libSearch">Search terms:</label>
			                <input type="text" placeholder="Search articles, books, videos, and more.." id="libSearch" name="search" value="" />
			            </div>
			        </div>
		            <div class="large-2 medium-4 small-12 columns left space-above">
			                <span id="showSearchDropDown" title="Advanced Library Search" class="search_button button small dark" >
			                    <span id="search-filter">filter/sort</span>
			                    <span id="search-arrow"></span>
			                </span>
		            </div>
		            <div class="large-2 medium-4 small-6 columns left space-above">
			                <button type="submit" id="libSearchSubmit" class="button small dark search_button"><span class='fa fa-search'></span>&nbsp;&nbsp;&nbsp;Search</button>
<!--			                <input type="submit" id="libSearchSubmit" class="button small dark search_button" value="Search" />-->
			            <!-- Hidden inputs -->
			                <div id="facets"></div>
		            </div>
					<div class="large-2 medium-4 small-6 columns left space-above">
						<a target="_blank" href="https://suny-bro.primo.exlibrisgroup.com/discovery/search?vid=01SUNY_BRO:01SUNY_BRO&amp;lang=en&amp;sortby=rank&amp;mode=advanced" class="button small dark search_button">Advanced</a>
					</div>
	    		</form>
			</div>
		</div>
	</div>
    <div id="searchDropDown">
        <div class="row" id="searchDropDownContent">
        <div class="columns small-12 medium-6 large-5">
            <div class="search-group">
                <h5>Item type:</h5>
                <div class="row">
                <div class="small-12 medium-6 columns">
                <div>
                    <input type="radio" name="itemType" id="allType" onclick="primoScopeSwitch(this);" value="all" checked >
                    <label for="allType">All</label>
                </div>
                <div>
                    <input type="radio" name="itemType" id="articleType" onclick="primoScopeSwitch(this);"  value="articles">
                    <label   for="articleType">Articles</label>
                </div>
                <div>
                    <input type="radio" name="itemType" id="booksType" onclick="primoScopeSwitch(this);"  value="books">
                    <label for="booksType">Books</label>
                </div>
                <div>
                    <input type="radio" name="itemType" id="videosType" onclick="primoScopeSwitch(this);"  value="videos">
                    <label for="videosType">Videos</label>
                </div>
                </div>
                <div class="small-12 medium-6 medium-pull-2 columns">
                <div>
                    <input type="radio" name="itemType" id="reservesType" onclick="primoScopeSwitch(this);"  value="reserves">
                    <label for="reservesType">Course Reserves</label>
                </div>
                <div>
                    <input type="radio" name="itemType" id="newspaperType" onclick="primoScopeSwitch(this);"  value="newspapers">
                    <label for="newspaperType">Newspapers</label>
                </div>
                <div>
                    <input type="radio" name="itemType" id="journalsType" onclick="primoScopeSwitch(this);"  value="journals">
                    <label for="journalsType">Journal Titles</label>
                </div>
            </div>
            </div>

            </div>
        </div>

        <div class="columns small-12 medium-2 large-3">
            <div class="search-group">
                <h5>Sort By:</h5>
                <div>
                    <input type="radio" name="searchSort" id="relSortBy" value="rank" checked>
                    <label for="relSortBy">Relevance</label>
                </div>
                <div>
                    <input type="radio" name="searchSort" id="dateSortBy" value="date_d">
                    <label for="dateSortBy">Date-newest</label>
                </div>
            </div>
        </div>
            
        <div class="columns small-12 medium-4 large-4" >
            <div class="search-group" id="searchCheckboxes">
                <h5>Show (multiple):</h5>
                
                <div>
                    <input type="checkbox" name="searchPeerReview" id="searchPeerReview">
                    <label for="searchPeerReview" id="searchPeerReviewLabel">Peer Reviewed/Scholarly</label>
                </div>
                <div>
                    <input type="checkbox" name="isPhysical" id="isPhysical">
                    <label for="isPhysical" id="isPhysicalLabel">Available In Library</label>
                </div>
                <div>
                    <input type="checkbox" name="isOnline" id="isOnline">
                    <label for="isOnline" id="isOnlineLabel">Available Online</label>
                </div>
                <div>
                    <input type="checkbox" name="isReference" id="isReference">
                    <label for="isReference" id="isReferenceLabel">Dictionaries &amp; Encyclopedias</label>
                </div>
                <div>
                    <input type="checkbox" name="isRecent" id="isRecent">
                    <label for="isRecent" id="isRecentLabel">Last Ten Years</label>
                </div>
            </div>
        </div>
        </div>
    </div>
    <div style="clear: both;"></div>
</div>
</body>
</html>
 
               	
               <!-- END INCLUDE -->

<!-- SCRIPT -->
<script type="text/javascript">
$("#searchDropDown").hide();
$("#searchDropDown").toggleClass();
$(document).on('click','#showSearchDropDown',function(){
    $("#searchDropDown").toggle();
    $("#showSearchDropDown").toggleClass("filterOn");
});


function gatherFacets() {
    var primo_item_type = $('input[name=itemType]:checked', '#searchDropDown').val();
    var primo_sort_type = $('input[name=searchSort]:checked', '#searchDropDown').val();
    var primo_peer_review = ($('#searchPeerReview').is(":checked")) ? 'PR' :'NOPR';
    var primo_isPhysical = ($('#isPhysical').is(":checked")) ? 'yes Physical' :'no Physical';
    var primo_isOnline = ($('#isOnline').is(":checked")) ? 'yes Online' :'no Online';
    var primo_isReference = ($('#isReference').is(":checked")) ? 'yes Ref' :'no Ref';
    var primo_isRecent = ($('#isRecent').is(":checked")) ? 'yes Recent' :'no Recent';
    var current_year = new Date().getFullYear();
    $("#facets").empty();
    $('#searchPeerReview').is(":checked") ? $("#facets").append('<input type="hidden" name="facet" value="tlevel,include,peer_reviewed" />') : '';
    $('#isPhysical').is(":checked") ? $("#facets").append('<input type="hidden" name="mfacet" value="tlevel,include,online_resources,1" /><input type="hidden" name="mfacet" value="tlevel,include,available_p,1" />') : '';
    $('#isOnline').is(":checked") ? $("#facets").append('<input type="hidden" name="facet" value="tlevel,include,online_resources" />') : '';
    $('#isReference').is(":checked") ? $("#facets").append('<input type="hidden" name="facet" value="rtype,include,reference_entrys" />') : '';
    $('#isRecent').is(":checked") ? $("#facets").append('<input type="hidden" name="mfacet" value="searchcreationdate,include,2012|,|'+current_year+',1" />') : '';
    (primo_item_type === "books") ? $("#facets").append('<input type="hidden" name="facet" value="rtype,include,books" />') : '';
    (primo_item_type === "videos") ? $("#facets").append('<input type="hidden" name="mfacet" value="rtype,include,videos,1" /><input type="hidden" name="mfacet" value="rtype,include,dvd,1" />') : '';
    (primo_item_type === "newspapers") ? $("#facets").append('<input type="hidden" name="mfacet" value="rtype,include,newspaper_articles,1" />') : '';
    (primo_sort_type === "date_d") ? $("#facets").append('<input type="hidden" name="sortby" value="date_d" />') : '';
   
}

function hideFacets()
{
	$('#searchPeerReviewLabel').css('display', 'none');
	$('#isPhysicalLabel').css('display', 'none');
	$('#isOnlineLabel').css('display', 'none');
	$('#isReferenceLabel').css('display', 'none');
	$('#isRecentLabel').css('display', 'none');
	$('#searchPeerReview').attr('checked', false);
	$('#isPhysical').attr('checked', false);
	$('#isOnline').attr('checked', false);
	$('#isReference').attr('checked', false);
	$('#isRecent').attr('checked', false);
}

function primoScopeSwitch(scope) 
{
       document.forms["libSearchForm"].action="https://suny-bro.primo.exlibrisgroup.com/discovery/search";

    switch(scope.value) {
        case "all":
        document.getElementById("primoTab").value = "Everything";
        document.getElementById("primoScope").value = "MyInst_and_CI";
        document.getElementById("searchPeerReview").disabled = false;
        showFacets();
        break;
   
        case "books":
        document.getElementById("primoTab").value = "Everything";
        document.getElementById("primoScope").value = "MyInstitution";
        document.getElementById("searchPeerReview").checked = false;
        document.getElementById("searchPeerReview").disabled = true;
        showFacets();
        break;
        
        case "articles":
        document.getElementById("primoTab").value = "CentralIndex";
        document.getElementById("primoScope").value = "CentralIndex";
        document.getElementById("searchPeerReview").disabled = false;
        showFacets();
        break;
        
        case "reserves":
        document.getElementById("primoTab").value = "CourseReserves";
        document.getElementById("primoScope").value = "CourseReserves";
        document.getElementById("searchPeerReview").checked = false;
        document.getElementById("searchPeerReview").disabled = true;
        showFacets();
        break;

        case "videos":
        case "newspapers":
        document.getElementById("primoTab").value = "Everything";
        document.getElementById("primoScope").value = "MyInst_and_CI";
        document.getElementById("searchPeerReview").checked = false;
        document.getElementById("searchPeerReview").disabled = false;
        showFacets();
        break;

        case "SUNYCat":
        document.getElementById("primoTab").value = "SUNY";
        document.getElementById("primoScope").value = "DiscoveryNetwork";
        document.getElementById("searchPeerReview").checked = false;
        showFacets();
        break;

        case "DigitalCommons":
        document.getElementById("primoTab").value = "DigitalCommons";
        document.getElementById("primoScope").value = "DigitalCommons";
        document.getElementById("searchPeerReview").checked = false;
        hideFacets();
        break;

        case "WorldCat":
        document.getElementById("primoTab").value = "WorldCat";
        document.getElementById("primoScope").value = "WorldCat";
        showFacets();
        break;

        case "journals":
        document.getElementById("primoTab").value = "jsearch_slot";
        document.forms["libSearchForm"].action = "https://suny-bro.primo.exlibrisgroup.com/discovery/jsearch";
        document.getElementById("primoScope").value = "";
        showFacets();
        break;
    }
}

//Windows on load function to load the intitial change
window.onload = function() {
 var scope = $('input[name=itemType]:checked', '#searchDropDown'); 
    primoScopeSwitch(scope);
};

function searchPrimo() {
     document.getElementById("primoQuery").value = "any,contains," + document.getElementById("libSearch").value;
     gatherFacets();
     document.forms["libSearchForm"].submit();
}

function showFacets()
{
	$('#searchPeerReviewLabel').css('display', 'inline-block');
	$('#isPhysicalLabel').css('display', 'inline-block');
	$('#isOnlineLabel').css('display', 'inline-block');
	$('#isReferenceLabel').css('display', 'inline-block');
	$('#isRecentLabel').css('display', 'inline-block');
}
</script>