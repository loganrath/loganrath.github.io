<html lang="en">
<head>
    <link href="https://fonts.googleapis.com/css?family=Raleway:500,700|Droid+Serif:400,700" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="https://www.brockport.edu/_resources/css/style.css" media="all"/>
    <link rel="stylesheet" href="https://www.brockport.edu/_resources/css/brockport.css" media="all">
    <script src="https://www.brockport.edu/_resources/js/jquery.min.js"> </script>
    <script src="https://www.brockport.edu/_resources/js/lib.min.js"> </script>
    <script src="https://www.brockport.edu/_resources/js/legacy.js"> </script>
<style>
.photo {
    background-color: #004159;
    background-size: cover;
    border-top: solid 1px #F4F4F4;
    border-bottom: solid 3px #002566;
    /* height: 360px;
    padding-top: 130px; */
}
#searchSection {
    max-width: 66em;
    margin: auto;
    padding: 1em;
    background-color: white;
    border-radius: 6px;
    position: relative;
    width: 90%;
}
#topSearchInput {
    position: relative;
}
#topSearchInput #libSearch {
    background-repeat: no-repeat;
    background-position: 10px center;
    background-color: #EDF2F4;
    border: 1px solid #F4F4F4;
    font-size: larger;
    min-height: 64px;
    padding-left: 20px;
    margin-bottom: 0;
}
#topSearchInput #showSearchDropDown #search-filter {
    display: inline-block;
    text-transform: uppercase;
    font-size: 14px;
    color: #004159;
    padding: 1.25em 1em;
}
#topSearchInput #showSearchDropDown {
    top: 5px;
    padding-top:5px;
    cursor: pointer;
    width: 130px;
    position: absolute;
    right: 70px;
    height: 56px;
    border-left: 1px solid #4e8496;
    border-right: 1px solid #4e8496;
}
#topSearchInput #showSearchDropDown #search-arrow {
    background-image: url(https://www.loganrath.com/draketest/search-arrow.svg);
    background-repeat: no-repeat;
    -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='search-arrow.svg', sizingMethod='scale')";
    -webkit-background-size: 18px;
    -moz-background-size: 18px;
    -o-background-size: 18px;
    background-position: center center;
    background-size: 18px;
    transform: rotate(-90deg);
    transition: .1s;
    width: 20px;
    height: 20px;
    display: inline-block;
    top: 4px;
    position: relative;
}
#topSearchInput #libSearchSubmit {
    background: transparent;
    background-image: url(https://www.loganrath.com/draketest/magnifying-glass.svg);
    background-repeat: no-repeat;
    -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='https://www.loganrath.com/draketest/magnifying-glass.svg', sizingMethod='scale')";
    background-size: 30px;
    background-position: center center;
    border: 0;
    height: 65px;
    right: 15px;
    top: 0;
    position: absolute;
    text-indent: -999999px;
    width: 45px;
}
#topSearchInput #showSearchDropDown.filterOn #search-arrow {
    transform: rotate(0deg) !important;
    transition: .1s;
}
#searchDropDown {font-family: Raleway, sans-serif;}

#searchDropDown input[type=radio], #searchDropDown input[type=checkbox] {
    display: none;
}
#searchDropDown input[type=radio]:not(:checked) + label, #searchDropDown input[type=checkbox]:not(:checked) + label  {
    width: 95%;
    padding: .25em 1em;
    border: 1px solid #05533e;
    border-radius: 5px;
    margin-bottom: 0.55em;
}
#searchDropDown input:checked + label {
    width: 95%;
    padding: .25em 1em;
    margin-bottom: 0.5em;
    background-color: #05533e;
    border: 1px solid #05533e;
    border-radius: 5px;
    color: white;
}
</style>
</head>
<body>
<main>
<div class="photo bleed bg-blue">
    <form target="_blank" action="https://suny-bro.primo.exlibrisgroup.com/discovery/search" onsubmit="searchPrimo()" method="get"  id="libSearchForm" name="libSearchForm">

     <!-- Customizable Parameters -->
        <input name="institution" type="hidden" value="01SUNY_BRO"> 
        <input name="vid" type="hidden" value="01SUNY_BRO:01SUNY_BRO"> 
        <input id="primoTab" name="tab" type="hidden" value="Everything"> 
        <input id="primoScope" name="search_scope" type="hidden" value="MyInst_and_CI"> 
        <input name="mode" type="hidden" value="Basic"> 
        
     <!-- Fixed parameters --> 
        <input name="displayMode" type="hidden" value="full"> 
        <input name="bulkSize" type="hidden" value="10"> 
        <input name="highlight" type="hidden" value="true"> 
        <input name="dum" type="hidden" value="true"> 
        <input id="primoQuery" name="query" type="hidden"> 
        <input name="displayField" type="hidden" value="all"> 
        
     <!-- Enable this if "Expand My Results" is enabled by default in Views Wizard --> 
        <input name="pcAvailabiltyMode" type="hidden" value="true"> 
                
        <div class="row" id="topSearchInput">
            <div class="search-holder">
                <span id="showSearchDropDown" title="Advanced Library Search" >
                    <span id="search-filter">filter by</span>
                    <span id="search-arrow"></span>
                </span>
                
                <input type="submit" id="libSearchSubmit" />
                <input type="text" placeholder="Search articles, books, videos, and more.."
                    id="libSearch" name="search" value="" />
            <!-- Hidden inputs -->
                <div id="facets"></div>
            </div>
        </div>
    </form>
</div>
        <div id="SearchDropDown">
            <div class="row" id="SearchDropDownContent">
            <div class="columns small-12 medium-6 large-5">
                <div class="search-group">
                    <h5>Item type:</h5>
                    <div class="row">
                    <div class="small-12 medium-5 columns">
                    <div>
                        <input type="radio" name="itemType" id="allType" onclick="primoScopeSwitch(this);" value="all" checked >
                        <label for="allType">All</label>
                    </div>
                    <div>
                        <input type="radio" name="itemType" id="articleType" onclick="primoScopeSwitch(this);"  value="articles">
                        <label   for="articleType">Articles</label>
                    </div>
                    <div>
                        <input type="radio" name="itemType" id="booksType" onclick="primoScopeSwitch(this);"  value="LibraryCatalog">
                        <label for="booksType">Books</label>
                    </div>
                    <div>
                        <input type="radio" name="itemType" id="videosType" onclick="primoScopeSwitch(this);"  value="videos">
                        <label for="videosType">Videos</label>
                    </div>
                    </div>
                    <div class="small-12 medium-5 medium-pull-2 columns">
                    <div>
                        <input type="radio" name="itemType" id="reservesType" onclick="primoScopeSwitch(this);"  value="reserves">
                        <label for="reservesType">Course Reserves</label>
                    </div>
                    <div>
                        <input type="radio" name="itemType" id="digitalcommonsType" onclick="primoScopeSwitch(this);"  value="DigitalCommons">
                        <label for="digitalcommonsType">Digital Commons</label>
                    </div>
                    <div>
                        <input type="radio" name="itemType" id="newspaperType" onclick="primoScopeSwitch(this);"  value="newspapers">
                        <label for="newspaperType">Newspaper</label>
                    </div>
                    <div>
                        <input type="radio" name="itemType" id="journalsType" onclick="primoScopeSwitch(this);"  value="journals">
                        <label for="journalsType">Journal Titles</label>
                    </div>
                </div>
                </div>

                </div>
            </div>

            <div class="columns small-12 medium-2 large-3">
                <div class="search-group">
                    <h5>Sort By:</h5>
                    <div>
                        <input type="radio" name="searchSort" id="relSortBy" value="rank" checked>
                        <label for="relSortBy">Relevance</label>
                    </div>
                    <div>
                        <input type="radio" name="searchSort" id="dateSortBy" value="date_d">
                        <label for="dateSortBy">Date-newest</label>
                    </div>
                </div>
            </div>
                
            <div class="columns small-12 medium-4 large-4" >
                <div class="search-group" id="searchCheckboxes">
                    <h5>Show (multiple):</h5>
                    
                    <div>
                        <input type="checkbox" name="searchPeerReview" id="searchPeerReview">
                        <label for="searchPeerReview">Peer Reviewed/Scholarly</label>
                    </div>
                    <div>
                        <input type="checkbox" name="isPhysical" id="isPhysical">
                        <label for="isPhysical">Available In Library</label>
                    </div>
                    <div>
                        <input type="checkbox" name="isOnline" id="isOnline">
                        <label for="isOnline">Available Online</label>
                    </div>
                    <div>
                        <input type="checkbox" name="isReference" id="isReference">
                        <label for="isReference">Dictionaries &amp; Encyclopedias</label>
                    </div>
                    <div>
                        <input type="checkbox" name="isRecent" id="isRecent">
                        <label for="isRecent">Last Ten Years</label>
                    </div>
                </div>
            </div>
            </div>
        </div>
        <div style="clear: both;"></div>
</body>

<script>
$("#SearchDropDown").hide();
$("#SearchDropDown").toggleClass();
$(document).on('click','#showSearchDropDown',function(){
    $("#SearchDropDown").toggle();
    $("#showSearchDropDown").toggleClass("filterOn");
});


function gatherFacets() {
    var primo_item_type = $('input[name=itemType]:checked', '#SearchDropDown').val();
    var primo_sort_type = $('input[name=searchSort]:checked', '#SearchDropDown').val();
    var primo_peer_review = ($('#searchPeerReview').is(":checked")) ? 'PR' :'NOPR';
    var primo_isPhysical = ($('#isPhysical').is(":checked")) ? 'yes Physical' :'no Physical';
    var primo_isOnline = ($('#isOnline').is(":checked")) ? 'yes Online' :'no Online';
    var primo_isReference = ($('#isReference').is(":checked")) ? 'yes Ref' :'no Ref';
    var primo_isRecent = ($('#isRecent').is(":checked")) ? 'yes Recent' :'no Recent';
    var current_year = new Date().getFullYear();
    $("#facets").empty();
    $('#searchPeerReview').is(":checked") ? $("#facets").append('<input type="hidden" name="facet" value="tlevel,include,peer_reviewed" />') : '';
    $('#isPhysical').is(":checked") ? $("#facets").append('<input type="hidden" name="mfacet" value="tlevel,include,online_resources,1" /><input type="hidden" name="mfacet" value="tlevel,include,available_p,1" />') : '';
    $('#isOnline').is(":checked") ? $("#facets").append('<input type="hidden" name="facet" value="tlevel,include,online_resources" />') : '';
    $('#isReference').is(":checked") ? $("#facets").append('<input type="hidden" name="facet" value="rtype,include,reference_entrys" />') : '';
    $('#isRecent').is(":checked") ? $("#facets").append('<input type="hidden" name="mfacet" value="searchcreationdate,include,2010|,|'+current_year+',1" />') : '';
    (primo_item_type === "books") ? $("#facets").append('<input type="hidden" name="mfacet" value="rtype,include,books,1" />');
    (primo_item_type === "videos") ? $("#facets").append('<input type="hidden" name="mfacet" value="rtype,include,videos,1" /><input type="hidden" name="mfacet" value="rtype,include,dvd,1" />') : '';
    (primo_item_type === "newspapers") ? $("#facets").append('<input type="hidden" name="mfacet" value="rtype,include,newspaper_articles,1" />') : '';
    (primo_sort_type === "date_d") ? $("#facets").append('<input type="hidden" name="sortby" value="date_d" />') : '';
   
}

function primoScopeSwitch(scope) {
       document.forms["libSearchForm"].action="https://suny-bro.primo.exlibrisgroup.com/discovery/search";

    switch(scope.value) {
        case "all":
        document.getElementById("primoTab").value = "Everything";
        document.getElementById("primoScope").value = "MyInst_and_CI";
        document.getElementById("searchPeerReview").disabled = false;

        break;
   
        case "LibraryCatalog":
        document.getElementById("primoTab").value = "LibraryCatalog";
        document.getElementById("primoScope").value = "MyInstitution";
        document.getElementById("searchPeerReview").checked = false;
        document.getElementById("searchPeerReview").disabled = true;
        break;
        
        case "articles":
        document.getElementById("primoTab").value = "CentralIndex";
        document.getElementById("primoScope").value = "CentralIndex";
        document.getElementById("searchPeerReview").disabled = false;
        break;
        
        case "reserves":
        document.getElementById("primoTab").value = "CourseReserves";
        document.getElementById("primoScope").value = "CourseReserves";
        document.getElementById("searchPeerReview").checked = false;
        document.getElementById("searchPeerReview").disabled = true;

        break;

        case "videos":
        document.getElementById("primoTab").value = "Everything";
        document.getElementById("primoScope").value = "MyInst_and_CI";
        document.getElementById("searchPeerReview").checked = false;
        document.getElementById("searchPeerReview").disabled = false;
        break;

        case "SUNYCat":
        document.getElementById("primoTab").value = "SUNY";
        document.getElementById("primoScope").value = "DiscoveryNetwork";
        document.getElementById("searchPeerReview").checked = false;
        
        break;

        case "DigitalCommons":
        document.getElementById("primoTab").value = "DigitalCommons";
        document.getElementById("primoScope").value = "DigitalCommons";
        document.getElementById("searchPeerReview").checked = false;
        break;

        case "WorldCat":
        document.getElementById("primoTab").value = "WorldCat";
        document.getElementById("primoScope").value = "WorldCat";
        break;

        case "Journals":
        document.getElementById("primoTab").value = "jsearch_slot";
        document.forms["libSearchForm"].action = "https://suny-bro.primo.exlibrisgroup.com/discovery/jsearch";
        document.getElementById("primoScope").value = "";
        break;
    }
}

//Windows on load function to load the intitial change
window.onload = function() {
 var scope = $('input[name=itemType]:checked', '#SearchDropDown'); 
    primoScopeSwitch(scope);
};

function searchPrimo() {
     document.getElementById("primoQuery").value = "any,contains," + document.getElementById("libSearch").value;
     gatherFacets();
     document.forms["libSearchForm"].submit();
}
</script>

</html>